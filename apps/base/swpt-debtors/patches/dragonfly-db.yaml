- op: test
  path: /metadata/name
  value: dragonfly-db

- op: test
  path: /metadata/labels
  value: null
- op: add
  path: /metadata/labels
  value:
    app.kubernetes.io/instance: dragonfly-db
    app.kubernetes.io/name: dragonfly
    app.kubernetes.io/part-of: swpt-debtors

- op: test
  path: /spec/labels
  value: null

- op: test
  path: /spec/affinity
  value: null
- op: add
  path: /spec/affinity
  value:
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchLabels:
            app.kubernetes.io/name: dragonfly
        topologyKey: kubernetes.io/hostname

- op: test
  path: /spec/priorityClassName
  value: null
- op: add
  path: /spec/priorityClassName
  value: login-database

- op: test
  path: /spec/authentication
  value: null
- op: add
  path: /spec/authentication
  value:
    passwordFromSecret:
      name: db-owner-credentials
      key: password

- op: test
  path: /spec/args
  value: null
- op: add
  path: /spec/args
  value:
    - "--dbfilename=snapshot"
