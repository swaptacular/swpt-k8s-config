source:
  kind: ConfigMap
  name: swpt-login-config
  fieldPath: metadata.annotations.kustomize_login_flush_cpu_limit
targets:
  - select:
      kind: Deployment
      name: login-flush-activate-users
    fieldPaths:
      - spec.template.spec.containers.[name=flush-activate-users].resources.limits.cpu
      - spec.template.spec.initContainers.[name=configure].resources.limits.cpu
    options:
      create: true
  - select:
      kind: Deployment
      name: login-flush-deactivate-users
    fieldPaths:
      - spec.template.spec.containers.[name=flush-deactivate-users].resources.limits.cpu
      - spec.template.spec.initContainers.[name=await-migrations].resources.limits.cpu
    options:
      create: true
