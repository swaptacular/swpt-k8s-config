apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: simple-git-server

configMapGenerator:
  - name: sshd-config
    files:
      - sshd_config
      - trusted_user_ca_keys

secretGenerator:
  - name: host-keys
    files:
      - secret-files/ssh_host_rsa_key.pub
      - secret-files/ssh_host_rsa_key
    options:
      disableNameSuffixHash: true
  - name: regcreds
    files:
      - ".dockerconfigjson=secret-files/regcreds.json"
    options:
      disableNameSuffixHash: true
    type: kubernetes.io/dockerconfigjson

resources:
  - base/

# You may edit the following lines to specify a different container
# image repository. Also, it is recommended to use an image digest
# instead of an image tag.
images:
- name: docker.io/rockstorm/git-server:2.47
  newName: docker.io/rockstorm/git-server
  newTag: "2.47"
