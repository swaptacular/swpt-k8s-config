apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: promtail
spec:
  interval: 10m
  chart:
    spec:
      chart: charts/promtail-6.17.0.tgz
      sourceRef:
        kind: GitRepository
        name: flux-system
        namespace: flux-system

  targetNamespace: monitoring
  releaseName: promtail
  postRenderers:
    - kustomize:
        images: []
  values:
    priorityClassName: critical-monitoring
    imagePullSecrets:
      - name: regcreds
    image:
      # Do not change these. Use "postRenderers/kustomize/images" instead.
      registry: docker.io
      repository: grafana/promtail
      tag: "3.5.1"
    resources: {}
    config:
      clients:
        - url: http://loki-write:3100/loki/api/v1/push
          tenant_id: 1
